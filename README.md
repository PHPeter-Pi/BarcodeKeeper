# Barcode Keeper

棚卸し支援のコンテナです。標準入力から受け取った値をファイルに追記で保存するだけです。

## 主な利用方法

ラズパイ Zero にモバイルバッテリーと USB バーコード・リーダーを繋げて、商品のバーコードを記録するのに利用します。

## 基本動作

1. コンテナが起動すると、標準入力で入力待ちになります。
2. 入力 + Enter で入力値がファイルに追記されていきます。
3. 入力値が `ENVFILE.env` に記載されている `CODE_STOP` と同じ値の場合は処理を中止します。

## 必須設定

コンテナ起動時に以下を行う必要があります。

- 環境変数 `CODE_STOP` をコンテナに渡す。（「環境変数の渡し方」参照）
- ローカルのディレクトリをコンテナの `/data` にマウントする。

## 仕様

- 読み込んだデータは、コンテナの `/data` ディレクトリに保存されていきます。
- 保存ファイルは日付ごとに作成されます。（`barcode_YYYYMMDD.csv`）
- 保存データは 3 列の CSV 形式です。列の書式は以下の通り:
  - `"読み込み時間　HHMMDD"`,`"<ミリ秒>"`,`"読み込みデータ"`

### 環境変数の渡し方

引数で渡してもいいのですが、`ENVFILE.env` に記載してファイルで渡した方が管理しやすいと思います。

- `docker run` の場合
  - `--env-file` オプションでファイル渡し。`--env-file $(pwd)/ENVFILE.env`
  - `--env` オプションで引数渡し。`--env CODE_STOP=123456`
- `docker-compose` の場合（`docker-compose.yml` の記載）
  - `env_file:` ディレクティブでファイル渡し。`env_file: ENVFILE.env`
  - `environment:` ディレクティブで直接指定渡し。

    ```yaml
    environment:
      - CODE_STOP=123456
    ```
